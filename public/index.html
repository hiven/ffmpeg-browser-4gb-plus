<!DOCTYPE html>
<html>
<head>
  <!-- Load UMD bundles from /ffmpeg -->
  <script src="/ffmpeg/ffmpeg.js"></script>
  <script src="/ffmpeg/util.js"></script>
</head>
<body>
  <script>
    (async () => {
      // 1. Create instance
      const ffmpeg = new FFmpegWASM.FFmpeg({ log: true });

      // 2. Load local assets
      await ffmpeg.load({
        coreURL:  '/ffmpeg/ffmpeg-core.js',
        wasmURL:  '/ffmpeg/ffmpeg-core.wasm',
        workerURL:'/ffmpeg/ffmpeg-core.worker.js'
      });
      console.log('FFmpeg v12 loaded locally (UMD)');

      // 3. Use writeFile, exec, readFile
      const response = await fetch('/path/to/video.webm');
      const arrayBuffer = await response.arrayBuffer();
      await ffmpeg.writeFile('in.webm', new Uint8Array(arrayBuffer));
      await ffmpeg.exec(['-i', 'in.webm', '-ss', '0', '-to', '1', 'out.mp4']);
      const out = await ffmpeg.readFile('out.mp4');
      // e.g. play the result:
      const videoURL = URL.createObjectURL(new Blob([out.buffer], { type: 'video/mp4' }));
      document.body.innerHTML += `<video src="${videoURL}" controls></video>`;
    })();
  </script>
</body>
</html>
